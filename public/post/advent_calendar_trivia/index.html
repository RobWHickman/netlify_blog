<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.55.6" />
  <meta name="author" content="Robert Hickman">

  
  
  
  
    
      
    
  
  <meta name="description" content="One of the most consistent fonts of posts on this blog is The Guardian’s football trivia page The Knowledge. A particular reason for this is that the small contained questions lend themselves to small blogposts that I can turn around in an hour or two, as opposed to being endlessly redrafted until I lose interest.
However, I still sometimes don’t quite get round to finishing some of these posts, or have trouble justifying a blog post on a very small and ‘trivial’ answer to a question.">

  
  <link rel="alternate" hreflang="en-us" href="/post/advent_calendar_trivia/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Robert Hickman">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Robert Hickman">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/advent_calendar_trivia/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@robert_squared">
  <meta property="twitter:creator" content="@robert_squared">
  
  <meta property="og:site_name" content="Robert Hickman">
  <meta property="og:url" content="/post/advent_calendar_trivia/">
  <meta property="og:title" content="Advent Calendar of Football Trivia Analyses | Robert Hickman">
  <meta property="og:description" content="One of the most consistent fonts of posts on this blog is The Guardian’s football trivia page The Knowledge. A particular reason for this is that the small contained questions lend themselves to small blogposts that I can turn around in an hour or two, as opposed to being endlessly redrafted until I lose interest.
However, I still sometimes don’t quite get round to finishing some of these posts, or have trouble justifying a blog post on a very small and ‘trivial’ answer to a question.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2019-12-01T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2019-12-01T00:00:00&#43;00:00">
  

  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<script async type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <title>Advent Calendar of Football Trivia Analyses | Robert Hickman</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Robert Hickman</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        

        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#publications_selected">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/files/cv/cv.pdf">
            
            <span>CV</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">Advent Calendar of Football Trivia Analyses</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2019-12-01 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Dec 1, 2019
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Robert Hickman">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    12 min read
  </span>
  

  
  

  
  
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Advent%20Calendar%20of%20Football%20Trivia%20Analyses&amp;url=%2fpost%2fadvent_calendar_trivia%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fadvent_calendar_trivia%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fadvent_calendar_trivia%2f&amp;title=Advent%20Calendar%20of%20Football%20Trivia%20Analyses"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fadvent_calendar_trivia%2f&amp;title=Advent%20Calendar%20of%20Football%20Trivia%20Analyses"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Advent%20Calendar%20of%20Football%20Trivia%20Analyses&amp;body=%2fpost%2fadvent_calendar_trivia%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


      <div class="article-style" itemprop="articleBody">
        


<p>One of the most consistent <a href="https://www.robert-hickman.eu/project/guardian_knowledge/">fonts of posts on this blog</a> is The Guardian’s football trivia page <a href="https://www.theguardian.com/football/series/theknowledge">The Knowledge</a>. A particular reason for this is that the small contained questions lend themselves to small blogposts that I can turn around in an hour or two, as opposed to being endlessly redrafted until I lose interest.</p>
<p>However, I still sometimes don’t quite get round to finishing some of these posts, or have trouble justifying a blog post on a very small and ‘trivial’ answer to a question. Therefore, as a sort of end-of-year round up, and a Christmas present to myself, I wanted to push out answers to questions I found particularly interesting over the last year and hadn’t quite got round to <sup>1</sup>. I’ll probably add them all to this post as I finish them up.</p>
<div id="nd-december---everything-in-its-right-place" class="section level1">
<h1>2nd December - Everything in its right place</h1>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
I wonder if any of any sporting leagues have ever ended in alphabetical order? <a href="https://t.co/you6u8Uzwz">pic.twitter.com/you6u8Uzwz</a>
</p>
— P A Hunt (<span class="citation">@TeachFMaths</span>) <a href="https://twitter.com/TeachFMaths/status/1139832761295024128?ref_src=twsrc%5Etfw">June 15, 2019</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<div id="answer---yes-kind-of.-but-also-no." class="section level2">
<h2>Answer - yes, kind of. But also no.</h2>
<p>This question has actually <a href="https://www.theguardian.com/football/2011/mar/09/has-league-ever-finished-alphabetical-order">been answered</a> (as many of these will have been). For a league of 20 teams (like the English Premier League), we might imagine if would have happened over the last ~150 years, but it’s almost certain from some basic maths that it won’t have, and moreover, will never happen.</p>
<p>Let’s load some data and see why.</p>
<pre class="r"><code>#as per usual, going to heavily rely on tidyverse 
#and engsoccerdata throughout these posts
library(tidyverse)
library(engsoccerdata)</code></pre>
<pre class="r"><code>#load English league data
league_data &lt;- engsoccerdata::england %&gt;%
  #select and gather match results
  select(season = Season, division, home, visitor, hgoal, vgoal) %&gt;%
  gather(&quot;location&quot;, &quot;team&quot;, -season, -division, -hgoal, -vgoal) %&gt;%
  mutate(
    g_for = case_when(
      location == &quot;home&quot; ~ hgoal,
      location == &quot;visitor&quot; ~ vgoal
    ),
    g_ag = case_when(
      location == &quot;home&quot; ~ vgoal,
      location == &quot;visitor&quot; ~ hgoal
    )) %&gt;%
  #get correct point for a win/loss
  mutate(
    points = case_when(
      g_for &gt; g_ag &amp; season &lt; 1981 ~ 2,
      g_for &gt; g_ag &amp; season &gt; 1980 ~ 3,
      g_for == g_ag ~ 1,
      g_for &lt; g_ag ~ 0
    ),
    gd = g_for - g_ag
  ) %&gt;%
  #group by season and league and get final tables
  group_by(season, division, team) %&gt;%
  summarise(points = sum(points),
            gd = sum(gd),
            g_for = sum(g_for)) %&gt;%
  arrange(-points, -gd, -g_for) %&gt;%
  #rank league order and alphabetical order
  mutate(league_pos = rank(-points, ties.method = &quot;first&quot;),
         alph_order = rank(team, ties.method = &quot;first&quot;)) %&gt;%
  select(season, division, team, league_pos, alph_order) %&gt;%
  #split by league and season
  split(., f = list(.$season, .$division)) %&gt;%
  keep(function(x) nrow(x) &gt; 0)

#print the top of the first league table
head(league_data[[1]])</code></pre>
<pre><code>## # A tibble: 6 x 5
## # Groups:   season, division [1]
##   season division team                    league_pos alph_order
##    &lt;int&gt;    &lt;int&gt; &lt;chr&gt;                        &lt;int&gt;      &lt;int&gt;
## 1   1888        1 Preston North End                1          9
## 2   1888        1 Aston Villa                      2          2
## 3   1888        1 Wolverhampton Wanderers          3         12
## 4   1888        1 Blackburn Rovers                 4          3
## 5   1888        1 Bolton Wanderers                 5          4
## 6   1888        1 West Bromwich Albion             6         11</code></pre>
<p>We can then run a load of Spearman’s rank correlation tests on the data to see which ones are perfectly correlated or anti-correlated in both league and alphabetical ranking. We’ll use the very handy <a href="https://cran.r-project.org/web/packages/broom/vignettes/broom.html">broom</a> package to tidy the results of our many tests into one data.frame (remove the filter at the end of the pipe chain to see what gets output).</p>
<pre class="r"><code>#use broom to tidily do stats
library(broom)

#correlate league and alphabetical order by year
exact_correlations &lt;- league_data %&gt;%
  map_df(., function(data) {
    cor.test(
      data$league_pos,
      data$alph_order,
      method = &quot;spearman&quot;
    ) %&gt;%
      tidy() %&gt;%
      mutate(season = unique(data$season),
             division = unique(data$division))
  }) %&gt;%
  #take only significantly 
  filter(abs(statistic) == 1)

print(exact_correlations)</code></pre>
<pre><code>## # A tibble: 0 x 7
## # ... with 7 variables: estimate &lt;dbl&gt;, statistic &lt;dbl&gt;, p.value &lt;dbl&gt;,
## #   method &lt;chr&gt;, alternative &lt;chr&gt;, season &lt;int&gt;, division &lt;int&gt;</code></pre>
<p>And so we find no exact correlations. There are no instances in 363 separate seasons of English league football where teams line up in either alphabetical, or anti-alphabetical order.</p>
<p>Let’s see why this is. To make things simpler, I’m going to imagine a cutdown league of only 6 teams using teams starting with each of the first 6 letter of the alphabet:</p>
<pre class="r"><code>first_letter_names &lt;- league_data %&gt;%
  bind_rows() %&gt;%
  ungroup() %&gt;%
  #get first letter of a team name
  mutate(first_letter = gsub(&quot;(^.)(.*)&quot;, &quot;\\1&quot;, team)) %&gt;%
  filter(season &gt; 1992 &amp;
           division == 1 &amp;
           first_letter %in% toupper(letters[1:6])
         ) %&gt;%
  #get one team beginning with A, B, C...
  filter(!duplicated(first_letter)) %&gt;%
  select(team) %&gt;%
  arrange(team) %&gt;%
  print()</code></pre>
<pre><code>## # A tibble: 6 x 1
##   team            
##   &lt;chr&gt;           
## 1 Arsenal         
## 2 Blackburn Rovers
## 3 Coventry City   
## 4 Derby County    
## 5 Everton         
## 6 Fulham</code></pre>
<p>For the league to finish in alphabetical order, we first need the team that is first alphabetically (Arsenal) to finish in first position. Assuming all teams have an equal chance of winning the league, the chance of this is obviously</p>
<p><span class="math display">\[ p(Arsenal = 1) =  \frac{1}{n}\]</span></p>
<p>Then we need the second team (Blackburn Rovers), to finish in second. This is predicated on Arsenal already finishing in first position, so the chance becomes</p>
<p><span class="math display">\[ p(Blackburn = 2 | Arsenal = 1) = \frac{1}{n-1} \]</span></p>
<p>and so on until the last team (Fulham) just have to slot into the only position left (n, 6th in our example)</p>
<p>Thus the total chance becomes</p>
<p><span class="math display">\[ \frac{1}{n} \cdot \frac{1}{n-1} ... \cdot \frac{1}{1} \]</span></p>
<p>which can also be written</p>
<p><span class="math display">\[ p(ordered) = \prod_{n = 1}^{N} \frac{1}{n}\]</span></p>
<p>which multiplies out to</p>
<p><span class="math display">\[ p(ordered) = \frac{1}{n!} \]</span></p>
<p>so for our very small league the chance of n (assumed equally strong teams)</p>
<pre class="r"><code>factorial(nrow(first_letter_names))</code></pre>
<pre><code>## [1] 720</code></pre>
<p>so we have a 1/720 chance that this league ends perfectly in alphabetical order. For bigger leagues (for reference most large European leagues contain 18-24 teams) this denominator grows <em>super-exponentially</em> and becomes tiny.</p>
<p>For the English Premier League (20 teams) for instance the chance becomes</p>
<pre class="r"><code>league_data %&gt;%
  bind_rows() %&gt;%
  ungroup() %&gt;%
  filter(season == max(season) &amp; division == 1) %&gt;% 
  nrow() %&gt;%
  factorial()</code></pre>
<pre><code>## [1] 2.432902e+18</code></pre>
<p>or 1 in 2.4 <a href="https://en.wikipedia.org/wiki/Order_of_magnitude">quintillion</a>. In short, if it’s assumed that there’s no relation between order of names and team strength, we might expect the universe to end before all 20 teams finish in perfect order.</p>
<p>We can test if our predictions bear out by looking at tiny leagues with small numbers of teams, e.g. <a href="https://en.wikipedia.org/wiki/2018%E2%80%9319_UEFA_Champions_League_group_stage">the group stages of the Champions/Europa Leagues</a>.</p>
<p>First we need to scrape the final tables for the last 8 years of data from both competitions:</p>
<pre class="r"><code>library(rvest)

#website to scrape group stage data from
fb_data &lt;- &quot;https://footballdatabase.com&quot;
ucl_links &lt;- sprintf(
  &quot;/league-scores-tables/uefa-champions-league-20%s-%s&quot;,
  10:18, 11:19
)
europa_links &lt;- sprintf(
  &quot;/league-scores-tables/uefa-europa-league-20%s-%s&quot;,
  10:18, 11:19
)
#function to scrape the data from these links
get_competition_data &lt;- function(competition, links) {
  data &lt;- links %&gt;%
    paste0(fb_data, .) %&gt;%
    map_df(., function(year) {
      page_read &lt;- read_html(year)
      
      groups &lt;- letters[1:8] %&gt;%
        map_df(., function(group) {
          page_read %&gt;% 
            html_nodes(sprintf(&quot;#total-group-%s &gt; div &gt; table&quot;, group)) %&gt;% 
            html_table(fill = TRUE) %&gt;% 
            as.data.frame() %&gt;%
            mutate(group)
        }) %&gt;%
        mutate(year = gsub(&quot;(.*-)([0-9]{4}-[0-9]{2})&quot;, &quot;\\2&quot;, year))
    }) %&gt;%
    mutate(competition)
}
#scrape and bind the data
uefa_data &lt;- bind_rows(
  get_competition_data(&quot;champions&quot;, ucl_links),
  get_competition_data(&quot;europa&quot;, europa_links)
)
#print a cutdown version of the scraped data
head(uefa_data %&gt;% select(club = Club, points = P, year, competition))</code></pre>
<pre><code>##                club points    year competition
## 1 Tottenham Hotspur     11 2010-11   champions
## 2       Inter Milan     10 2010-11   champions
## 3         FC Twente      6 2010-11   champions
## 4     Werder Bremen      5 2010-11   champions
## 5        Schalke 04     13 2010-11   champions
## 6              Lyon     10 2010-11   champions</code></pre>
<p>So now we have 128 (8 groups x 8 years x 2 competitions) ‘mini-leagues’ each of 4 teams.</p>
<p>We can then munge this data to find all the groups where the teams finish in alphabetical order. We’d expect 128/4! leagues to finish in alphabetical order (or 5.33 to be exact).</p>
<pre class="r"><code>ordered_groups &lt;- uefa_data %&gt;%
  #select relevant informatiob
  select(team = Club, league_pos = X., group, year, competition) %&gt;%
  #by group find where teams finish in alphabetical order
  group_by(year, group, competition) %&gt;%
  mutate(alph_order = rank(team, ties.method = &quot;first&quot;)) %&gt;%
  filter(league_pos == alph_order) %&gt;%
  #keep only group where all (4) teams finish in order
  summarise(n = n()) %&gt;%
  filter(n == 4) %&gt;%
  #join and filter back data
  left_join(uefa_data, ., by = c(&quot;group&quot;, &quot;year&quot;, &quot;competition&quot;)) %&gt;%
  filter(!is.na(n)) %&gt;%
  #select useful information
  select(team = Club, points = P, gd = X..., league_pos = X.,
         group, year, competition) %&gt;%
  #split groups up
  split(., list(.$year, .$group, .$competition)) %&gt;%
  keep(function(x) nrow(x) &gt; 0)</code></pre>
<p>which leaves us with 5 leagues that have finished in order! almost exactly what we’d predict by chance if the first letter of a teams name had no effect on the outcome.</p>
<pre class="r"><code>ordered_groups</code></pre>
<pre><code>## $`2011-12.c.champions`
##                team points gd league_pos group    year competition
## 5           Benfica     12  4          1     c 2011-12   champions
## 6          FC Basel     11  1          2     c 2011-12   champions
## 7 Manchester United      9  3          3     c 2011-12   champions
## 8     Otelul Galati      0 -8          4     c 2011-12   champions
## 
## $`2015-16.c.champions`
##                team points gd league_pos group    year competition
## 9   Atlético Madrid     13  8          1     c 2015-16   champions
## 10          Benfica     10  2          2     c 2015-16   champions
## 11      Galatasaray      5 -4          3     c 2015-16   champions
## 12 Lokomotiv Astana      4 -6          4     c 2015-16   champions
## 
## $`2010-11.f.champions`
##             team points  gd league_pos group    year competition
## 1     Chelsea FC     15  10          1     f 2010-11   champions
## 2      Marseille     12   9          2     f 2010-11   champions
## 3 Spartak Moskva      9  -3          3     f 2010-11   champions
## 4         Žilina      0 -16          4     f 2010-11   champions
## 
## $`2015-16.g.champions`
##                   team points  gd league_pos group    year competition
## 13          Chelsea FC     13  10          1     g 2015-16   champions
## 14         Dynamo Kyiv     11   4          2     g 2015-16   champions
## 15            FC Porto     10   1          3     g 2015-16   champions
## 16 Maccabi Tel Aviv FC      0 -15          4     g 2015-16   champions
## 
## $`2018-19.h.champions`
##                 team points gd league_pos group    year competition
## 17          Juventus     12  5          1     h 2018-19   champions
## 18 Manchester United     10  3          2     h 2018-19   champions
## 19          Valencia      8  0          3     h 2018-19   champions
## 20        Young Boys      4 -8          4     h 2018-19   champions</code></pre>
<p>We can also do a larger test by randomly selecting teams out of the English league data we looked at earlier. To do this I need two quick functions: one to sample randomly from the data, and another to carry out the correlation test.</p>
<p>The first takes a number of samples (how many tests to run) and then selects a number of teams from each league sample. For instance, if I chose 3 teams, it might select Liverpool, Manchester United, and Watford, from the <a href="https://en.wikipedia.org/wiki/2018%E2%80%9319_Premier_League">last season of the Premier League</a>. These teams finished 2nd, 6th, and 11th respectively, so this ‘sampled league’ would fulfill the criteria of finishing in alphabetical order.</p>
<pre class="r"><code>set.seed(3459)

#take a random sample of leagues and teams withing those leagues
sample_cutdown_leagues &lt;- function(nteams, nsamples, data) {
  samples &lt;- sample(length(data), nsamples, replace = TRUE)
  
  sampled_league_data &lt;- data[samples]
  
  league_team_serials &lt;- sampled_league_data %&gt;%
    lapply(., nrow) %&gt;%
    lapply(., sample, size = nteams)
  
  #carry out the correlation test
  league_cor_test &lt;- map2_df(
    .x = sampled_league_data,
    .y = league_team_serials,
    .f = cor_test_data
  )
}
  
#function for correlation test
cor_test_data &lt;- function(full_league_data, sampled_teams) {
  sampled_league &lt;- full_league_data[sampled_teams,] %&gt;%
    arrange(league_pos)
  cor_test &lt;- cor.test(
    sampled_league$league_pos,
    sampled_league$alph_order,
    method = &quot;spearman&quot;
  ) %&gt;%
    tidy() %&gt;%
    #mutate on information about that season and teams chosen
    mutate(teams = paste(sampled_league$team, collapse = &quot;, &quot;),
           season = unique(sampled_league$season),
           division = unique(sampled_league$division))
}</code></pre>
<p>So for instance if I just run it once, randomly selecting 4 teams:</p>
<pre class="r"><code>test &lt;- sample_cutdown_leagues(4, 1, league_data)
#print the teams selected
test$teams</code></pre>
<pre><code>## [1] &quot;Brentford, Bristol Rovers, Brighton &amp; Hove Albion, Chester&quot;</code></pre>
<pre class="r"><code>test</code></pre>
<pre><code>## # A tibble: 1 x 8
##   estimate statistic p.value method   alternative teams     season division
##      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;      &lt;int&gt;    &lt;int&gt;
## 1      0.8      2.00   0.333 Spearma~ two.sided   Brentfor~   1994        3</code></pre>
<p>It gives me 4 teams from the 1994 division 3 who didn’t finish in alphabetical order (though, amusingly, all have a very similar starting letter).</p>
<p>We can then carry this out with 10000 samples for n_team numbers of 2:6 to see if we get roughly the expected numbers of exactly correlated league finish positions (this will take 1-2mins) by finding out how many tests give an estimate of 1 (finished exactly correlated with alphabetical order) or -1 (finished exactly anti-correlated with alphabetical order).</p>
<p>Both these numbers should be roughly equal to the number of samples (10000) divided by the factorial of the number of teams selected.</p>
<pre class="r"><code>test_n_numbers &lt;- function(nteams) {
  #run sampling function n times
  #10k should do
  sampling &lt;- sample_cutdown_leagues(nteams, 10000, league_data)
  
  #find exactly correlated and anti-correlated examples
  #where teams are in exact alphabetical order ascending or descending
  correlated &lt;- length(which(sampling$estimate == max(sampling$estimate)))
  anti_correlated &lt;- length(which(sampling$estimate == min(sampling$estimate)))
  expected &lt;- nrow(sampling) / factorial(nteams)
  
  df &lt;- data.frame(n = nteams,
                   sample_cor = correlated,
                   sample_anticor = anti_correlated,
                   sample_expected = expected)
}
#run the function
testing &lt;- map_df(2:6, test_n_numbers)
#print results
print(testing)</code></pre>
<pre><code>##   n sample_cor sample_anticor sample_expected
## 1 2       5010           4990      5000.00000
## 2 3       1676           1665      1666.66667
## 3 4        367            398       416.66667
## 4 5        101             81        83.33333
## 5 6         14             15        13.88889</code></pre>
<p>And the numbers line up, as we would expect if there is no effect of the first letter of a team’s name upon final league position.</p>
<p>Finally, we can do a Kendall’s correlation test to really see if there is any relationship between alphabetical team name order and final league finish for all out our English league data. We use Kendall instead of a Spearman test here because we grouping all the data together we’re going to have a lot of ties (one team has to finish 1st in every league each year).</p>
<pre class="r"><code>all_data &lt;- league_data %&gt;%
  bind_rows()

#do a big correlation test
kendall_test &lt;- cor.test(all_data$alph_order,
                         all_data$league_pos,
                         alternative = &quot;two.sided&quot;,
                         method = &quot;kendall&quot;) %&gt;%
  tidy() %&gt;%
  print()</code></pre>
<pre><code>## # A tibble: 1 x 5
##   estimate statistic p.value method                         alternative
##      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                          &lt;chr&gt;      
## 1   0.0135      1.74  0.0826 Kendall&#39;s rank correlation tau two.sided</code></pre>
<p>And we can see that, even though our p-value is <a href="https://mchankins.wordpress.com/2013/04/21/still-not-significant-2/">‘approaching significance’</a>, it’s not significant at our fairly liberal threshold of 0.05. Even then, the effect size (0.013) is tiny, so there’s no need for Watford to start worrying <a href="https://www.bbc.co.uk/sport/football/50619972">just yet</a>.</p>
<ol style="list-style-type: decimal">
<li>SMALL DIGRESSION: I love blogging on this site and it also has been a great help to me in numerous ways (practice coding/writing, feeling like a “programmer”, for job interviews), but quite a lot of the time feel posts are not quite where I want them (I’m sure this feeling isn’t restricted to me) and so won’t put them up and so that time (sometimes quite a few hours!) I put into them in my spare time feels wasted and makes me feel worse about myself. I’m hoping that pushing out fairly rushed/half formed ideas like this will help with this.</li>
</ol>
</div>
</div>
<div id="rd-december---groan-rangers" class="section level1">
<h1>3rd December - Groan Rangers</h1>
<p><a href="https://www.theguardian.com/football/2019/jul/24/which-teams-were-managed-by-their-all-time-leading-goalscorer">“Berwick Rangers have conceded 42 goals in competitive matches – Scottish League 2, relegation play-off, Scottish League – since last scoring themselves, against Peterhead, on March 19th. Is this a record for a league club (I know they’ve now lost that status, but all of these matches are league level competition)?” asks Huw Richards.</a></p>
</div>

      </div>

      


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/the_knowledge">the_knowledge</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/football">football</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/rstats">rstats</a>
  
</div>



    </div>
  </div>

</article>



<div class="article-container article-widget">
  <div class="hr-light"></div>
  <h3>Related</h3>
  <ul>
    
    <li><a href="/post/guardian_knowledge_june/">The Guardian Knowledge June 2019</a></li>
    
    <li><a href="/post/counties_league_points/">Which English County Has Won the Most Points</a></li>
    
    <li><a href="/post/the-knowledge-4th-august-2018/">The Knowledge 4th August 2018</a></li>
    
    <li><a href="/post/dynamic_web_scraping/">Scraping Dynamic Websites with PhantomJS</a></li>
    
    <li><a href="/post/the-knowledge-7th-february-2019/">The Knowledge 7th February 2019</a></li>
    
  </ul>
</div>




<div class="article-container">
  

</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

